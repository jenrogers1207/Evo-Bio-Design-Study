!function(t){function e(e){for(var r,l,o=e[0],s=e[1],c=e[2],d=0,f=[];d<o.length;d++)l=o[d],a[l]&&f.push(a[l][0]),a[l]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);for(u&&u(e);f.length;)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(r=!1)}r&&(i.splice(e--,1),t=l(l.s=n[0]))}return t}var r={},a={0:0},i=[];function l(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=t,l.c=r,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)l.d(n,r,function(e){return t[e]}.bind(null,r));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/Evo-Bio-Design-Study/";var o=window.webpackJsonp=window.webpackJsonp||[],s=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=s;i.push([132,1]),n()}({132:function(t,e,n){"use strict";n.r(e);n(14),n(19),n(16),n(17),n(52),n(54),n(21);var r=n(0);function a(t,e,n,r,a,i,l){try{var o=t[i](l),s=o.value}catch(t){return void n(t)}o.done?e(s):Promise.resolve(s).then(r,a)}function i(t,e,n){return l.apply(this,arguments)}function l(){var t;return t=regeneratorRuntime.mark(function t(e,n,r){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n);case 2:return(a=t.sent).type=String(r),t.abrupt("return",a);case 5:case"end":return t.stop()}},t)}),(l=function(){var e=this,n=arguments;return new Promise(function(r,i){var l=t.apply(e,n);function o(t){a(l,r,i,o,s,"next",t)}function s(t){a(l,r,i,o,s,"throw",t)}o(void 0)})}).apply(this,arguments)}n(111),n(55),n(23);function o(t,e){return Object.keys(t).map(function(n,a){if("continuous"==t[n].type){var i=r.o(t[n].rows.map(function(t){return t.upperCI95})),l=r.r(t[n].rows.map(function(t){return t.lowerCI95}));r.p(t[n].rows.map(function(t){return t.realVal}));return{field:n,type:"continuous",max:i,min:l,yScale:r.s().range([0,43]).domain([l,i]).clamp(!0),satScale:r.s().range([0,.9]).domain([l,i]),colorScale:r.s().range([e[a][0],"#f23929"]).domain([l,i]),catColor:e[a][0]}}var o=t[n].fields.filter(function(t){return"nodeLabels"!=t});return{field:n,type:"discrete",stateColors:o.map(function(t,n){return{state:t,color:e[n][0]}}),catColor:e[a][0],scales:o.map(function(t){return{field:n,scaleName:t,max:1,min:0,yScale:r.s().range([45,0]).domain([0,1])}})}})}function s(t,e,n,r){var a=t.rows.map(function(t){return t.x});return e.map(function(t,e){t.label=a[e];var i=n.rows.map(function(t){return t[""]});t.node=t.V2;var l=r.map(function(t){return t.field}),o={},s=n.rows[i.indexOf(t.label)];return l.forEach(function(t){var e=r.filter(function(e){return e.field==t})[0];if("discrete"===e.type){var n=e.scales.filter(function(e){return e.scaleName==s[t]})[0].yScale,a=e.scales.map(function(t){return t.scaleName}).map(function(e){var r=e===s[t]?1:0;return{state:e,scaleVal:n(r),realVal:r}});o[t]={states:a,label:t,type:e.type,leaf:!0}}else if("continuous"===e.type){var i=e.yScale;o[t]={scaleVal:i(s[t]),scaledHigh:0,scaledLow:0,realVal:s[t],type:e.type,leaf:!0}}else o[t]="error in leaf matching"}),t.attributes=o,t.leaf=!0,t})}function c(t,e,n,r){return t.rows.map(function(t,a){var i=Object.keys(n),l=n[i[0]].rows.map(function(t){return t.nodeLabels}).indexOf(t.V2);return t.edgeLength=e.rows[a].x,t.node=t.V2,l>-1&&i.forEach(function(e){if("continuous"==n[e].type){var a=r.filter(function(t){return t.field==e})[0].yScale,i=n[e].rows[l];i.scaleVal=a(i.estimate),i.scaledLow=a(i.lowerCI95),i.scaledHigh=a(i.upperCI95),i.realVal=i.estimate,i.type="continuous",t.attributes=null!=t.attributes?t.attributes:{},t.attributes[e]=i}else{var o=r.filter(function(t){return t.field==e})[0].scales,s=n[e].rows[l],c=o.map(function(t){return{state:t.scaleName,scaleVal:t.yScale(s[t.scaleName]),realVal:s[t.scaleName]}});t.attributes=null!=t.attributes?t.attributes:{},t.attributes[e]={states:c,type:"discrete"}}}),t})}function u(t,e,n){t.forEach(function(t,r){t[0].attributes={},Object.keys(e).map(function(r){if("continuous"==e[r].type){var a=e[r].rows.filter(function(e){return e.nodeLabels==t[0].node})[0];t[0].attributes[r]={};var i=n.filter(function(t){return t.field==r})[0].yScale;t[0].attributes[r].scaleVal=i(a.estimate),t[0].attributes[r].scaledLow=i(a.lowerCI95),t[0].attributes[r].scaledHigh=i(a.upperCI95),t[0].attributes[r].realVal=a.estimate,t[0].attributes[r].upperCI95=a.upperCI95,t[0].attributes[r].lowerCI95=a.lowerCI95,t[0].attributes[r].scale=i,t[0].attributes[r].type="continuous"}else if("discrete"==e[r].type){var l=e[r].rows.filter(function(e){return e.nodeLabels==t[0].node})[0],o=n.filter(function(t){return t.field==r})[0].scales.map(function(t){return{state:t.scaleName,scaleVal:t.yScale(l[t.scaleName]),realVal:l[t.scaleName]}});t[0].attributes[r]={states:o,type:"discrete"}}else console.error("type not found")})});var a=r.o(t.map(function(t){return t.length})),i=r.s().range([0,1e3]).clamp(!0);return t.map(function(t,e){t.xScale=i.domain([0,a-1]);var n=t.length-1,r=(t.map(function(t){return t.edgeLength}),0);return t.map(function(e,i){var l=Object.assign({},e),o=l.edgeLength+r;return l.edgeMove=i<n?o:1,r+=l.edgeLength,l.move=i<n?t.xScale(i):t.xScale(a-1),l})})}function d(t,e,n){var r=null==n?Object.keys(t[0][0].attributes):n;return t.map(function(t){return r.map(function(n){return t.map(function(r){var a=t[t.length-1].label;if("continuous"===r.attributes[n].type)return r.attributes[n].species=a,r.attributes[n].color=e.filter(function(t){return t.field===n})[0].catColor,r.attributes[n].move=r.move,r.attributes[n].edgeMove=r.edgeMove,r.attributes[n].label=n,r.attributes[n].yScale=e.filter(function(t){return t.field===n})[0].yScale,r.attributes[n].satScale=e.filter(function(t){return t.field===n})[0].satScale,r.attributes[n].colorScale=e.filter(function(t){return t.field===n})[0].colorScale,r.attributes[n];if("discrete"===r.attributes[n].type){if(r.leaf){var i=r.attributes[n];return i.species=a,i.winState=r.attributes[n].states.filter(function(t){return 1===t.realVal})[0].state,i.color=e.filter(function(t){return t.field===n})[0].stateColors.filter(function(t){return t.state===i.winState})[0].color,i.move=r.move,i.edgeMove=r.edgeMove,i.attrLabel=n,i}return(r.attributes[n].states?r.attributes[n].states:r.attributes[n]).map(function(t,i){return t.color=e.filter(function(t){return t.field===n})[0].stateColors.filter(function(e){return e.state===t.state})[0].color,t.move=r.move,t.edgeMove=r.edgeMove,t.attrLabel=n,t.species=a,t})}console.error("attribute type not found")})})})}n(33),n(34),n(35),n(67),n(36),n(24),n(122),n(37),n(38),n(39);function f(t,e,n,r){return e.map(function(e){return function t(e,n,r,a,i){var l=e.filter(function(t){return t[i]===n[a]});return l.length>0?(r.push(l[0]),t(e,l[0],r,a,i)):(r.push({root:!0,node:n[a],edgeLength:0}),r.reverse())}(t,e,[e],n,r)})}n(40),n(41),n(70),n(42),n(97),n(98),n(125),n(130);function p(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(t,e,n,a){var i=m.filter(function(t){return"hide-attribute"===t.type}).map(function(t){return t.attribute}),l=Object.keys(t[0][0].attributes).filter(function(t){return-1===i.indexOf(t)}),o=p(t),s=i.length>0?n.filter(function(t){return-1===i.indexOf(t.field)}).map(function(t){return t.field}):null;d(o,n,s);r.o(o.map(function(t){return t.length}));var c=r.q(o.map(function(t){return t.length}))-1,u=new Array(c+1).fill().map(function(t,e){var n=1/c;return{base:e>0?(e-1)*n:0,top:e*n,binI:e}}),f=o.map(function(t){return t.filter(function(t){return 1!=t.leaf})}),v=o.flatMap(function(t){return t.filter(function(t){return!0===t.leaf})});u.map(function(t,e){var n=f.flatMap(function(n){return n.filter(function(n){return 0===e?0===n.edgeLength:n.edgeMove>t.base&&n.edgeMove<=t.top})});return t.data=n,t});var h=l.map(function(t){var e=n.filter(function(e){return e.field===t})[0],a=u.map(function(e){return e.data.length>0?e.fData=e.data.map(function(e){return e.attributes[t]}):e.fData=e.data=[],{data:e.fData,range:[e.base,e.top],index:e.binI,key:t}}),i=v.map(function(e){return e.attributes[t]}),l={data:i};if("continuous"===e.type){var o=r.o(a.flatMap(function(t){return t.data}).map(function(t){return t.realVal})),s=r.r(a.flatMap(function(t){return t.data}).map(function(t){return t.realVal})),c=r.s().domain([s,o]).range([0,90]),d=r.l().value(function(t){return t.realVal}).domain(c.domain()).thresholds(c.ticks(20));a.forEach(function(t){return t.type=e.type,t.bins=d(t.data),t.domain=[o,s],t});var f=r.o(i.flatMap(function(t){return t.realVal})),h=r.r(i.flatMap(function(t){return t.realVal})),g=r.s().domain([h,f]).range([0,90]),m=r.l().value(function(t){return t.realVal}).domain(g.domain()).thresholds(g.ticks(20));return l.bins=m(i),{key:t,branches:p(a),type:e.type,leafData:l}}var b=i[0].states;a.bins=null,l.bins=b.map(function(t){return i.filter(function(e){return e.winState===t.state})});r.s().domain([0,1]).range([0,90]);a.map(function(t){t.type=e.type;var n=e.stateColors;return t.bins=b.map(function(e){var a=n.filter(function(t){return t.state===e.state}),i=t.data.flatMap(function(t){return t.states.filter(function(t){return t.state===e.state})}).map(function(t){return t.realVal}),l=r.p(i),o=r.h(i);return{state:e.state,average:l,stUp:l+o,stDown:l-o,color:a[0].color,range:t.range}}),t});var y=b.map(function(t){var e=t.state;return a.flatMap(function(t){return t.bins.filter(function(t){return t.state===e})})});return{key:t,branches:p(a),type:e.type,leafData:l,states:y}});e.append("div").classed("species-count",!0).append("text").text("Shown: "+t.length+" /"+z[0].length);var g=e.append("svg");g.attr("id","main-summary-view"),g.attr("height",115*l.length);var b=r.s().domain([0,c]).range([0,780]),y=g.append("g").classed("branch-bar",!0).attr("transform","translate(10, 20)");y.append("line").attr("y1",2).attr("y2",2).attr("x1","100").attr("x2",890).attr("stroke","gray").attr("stroke-width",.25),y.append("text").text("Root").attr("transform","translate(50, 7)"),y.append("text").text("Leaves").attr("transform","translate(950, 7)");var x=g.append("g").classed("summary-wrapper",!0);x.attr("transform","translate(10, 50)");var w=[],A=[];o.map(function(t){t.filter(function(t){return 1!=t.leaf}).map(function(t){-1==A.indexOf(t.node)&&(A.push(t.node),w.push({node:t.node,eMove:t.edgeMove}))})});var k=r.s().domain([0,1]).range([0,795]),O=y.selectAll("g.branch-points").data(w).join("g").attr("class",function(t,e){return t.node}).classed("branch-points",!0);O.attr("transform",function(t,e){return"translate("+(105+k(t.eMove))+", 0)"}),O.append("circle").attr("r",5).attr("fill","rgba(123, 141, 153, 0.5)");var S=x.selectAll(".attr-wrap").data(h).join("g").attr("class",function(t){return t.key+" attr-wrap"});S.attr("transform",function(t,e){return"translate(0,"+95*e+")"});S.append("text").text(function(t){return t.key}).attr("y",40).attr("x",80).style("text-anchor","end");var j=S.append("g").classed("predicted",!0),V=(j.append("g").classed("path-wrapper",!0),j.selectAll("g.branch-bin").data(function(t){return t.branches}).join("g").classed("branch-bin",!0));V.attr("transform",function(t,e){return"translate("+(100+b(e))+", 0)"});var M=V.filter(function(t){return"continuous"===t.type});M.on("mouseover",function(t,e,n){var a=t.data.map(function(t){return t.nodeLabels}),i=(O.filter(function(t){return a.indexOf(t.node)>-1}).classed("selected",!0),r.v("#sidebar").selectAll(".node").filter(function(t){return a.indexOf(t.data.node)>0}).classed("selected-branch",!0),r.s().domain(t.domain).range([0,90]));r.v(n[e]).append("g").classed("y-axis",!0).call(r.c(i).ticks(5))}).on("mouseout",function(t,e,n){r.w(".branch-points.selected").classed("selected",!1),r.w(".selected-branch").classed("selected-branch",!1),r.v(n[e]).select(".y-axis").remove()});var L=r.a().curve(r.f).x(function(t,e){return r.s().domain([0,16]).range([0,90])(e)}).y0(function(t){return r.s().domain([0,50]).range([0,80]).clamp(!0)(0)}).y1(function(t){var e=Object.keys(t).length-1;return r.s().domain([0,50]).range([0,80]).clamp(!0)(e)});M.each(function(t,e,n){var a=r.v(n[e]).selectAll("g").data([t.bins]).join("g").classed("distribution",!0);a.attr("transform","translate(11, 90) rotate(-90)"),a.append("path").attr("d",L).attr("fill","rgba(133, 193, 233, .4)").style("stroke","rgba(133, 193, 233, .9)")});M.append("rect").attr("height",90).attr("width",10).style("fill","none").style("stroke","gray");var I=M.selectAll("rect.range").data(function(t){return t.data.map(function(e){return e.range=t.range,e})}).join("rect").classed("range",!0);I.attr("width",10),I.attr("height",function(t,e){if(null!=t.yScale){var n=t.yScale;return n.range([80,0]),n(t.lowerCI95)-n(t.upperCI95)}return 0}).attr("transform",function(t,e){var n=t.yScale;return n.range([80,0]),"translate(0,"+n(t.upperCI95)+")"}),I.attr("fill","rgba(133, 193, 233, .05)"),M.append("rect").attr("width",10).attr("height",function(t,e){return null!=t.data[0]?3:0}).attr("transform",function(t,e){if(null!=t.data[0]){var n=t.data[0].yScale;return n.range([90,0]),"translate(0,"+n(r.p(t.data.map(function(t){return t.realVal})))+")"}return"translate(0,0)"}).attr("fill","#004573");var C=V.filter(function(t){return"discrete"===t.type});C.append("line").attr("x0",2).attr("x1",2).attr("y0",0).attr("y1",90).attr("stroke","gray").attr("stroke-width",.5),C.append("rect").attr("height",90).attr("width",10).attr("opacity",0);C.on("mouseover",function(t,e,n){var a=r.s().domain([1,0]).range([0,90]);r.v(n[e]).append("g").classed("y-axis",!0).call(r.c(a).ticks(3));O.filter(function(e){return e.eMove>=t.range[0]&&e.eMove<t.range[1]}).classed("selected",!0);r.v("#sidebar").selectAll(".node").filter(function(e){return e.data.combEdge>=t.range[0]&&e.data.combEdge<t.range[1]}).classed("selected-branch",!0)}).on("mouseout",function(t,e,n){r.v(n[e]).select(".y-axis").remove(),r.w(".branch-points.selected").classed("selected",!1),r.w(".selected-branch").classed("selected-branch",!1)});var E=j.filter(function(t){return"discrete"===t.type}).selectAll(".path-wrapper").selectAll("g.state").data(function(t){return t.states}).join("g").classed("state",!0);E.append("path").attr("d",function(t,e){return r.a().curve(r.f).x(function(t,e){return r.s().domain([0,9]).range([0,900])(e)}).y0(function(t){return r.s().domain([0,1]).range([80,0]).clamp(!0)(t.stDown)}).y1(function(t){return r.s().domain([0,1]).range([80,0]).clamp(!0)(t.stUp)})(t)}).attr("transform","translate(100, 10)").attr("fill",function(t,e){return t[0]?t[0].color:"#fff"}).attr("opacity",.3),E.append("path").attr("d",function(t,e){return r.n().curve(r.f).x(function(t,e){return r.s().domain([0,9]).range([0,900])(e)}).y(function(t){return r.s().domain([0,1]).range([80,0]).clamp(!0)(t.average)})(t)}).attr("transform","translate(100, 10)").attr("fill","none").attr("stroke",function(t,e){return t[0]?t[0].color:"#fff"});var T=S.append("g").classed("observed",!0);T.attr("transform","translate(950, 0)");var F=T.filter(function(t){return"continuous"===t.type}),P=F.selectAll("g.ob-bars").data(function(t){return t.leafData.bins}).join("g").classed("ob-bars",!0);P.append("rect").attr("width",function(t,e,n){return 200/n.length}).attr("height",function(t,e){return r.s().domain([0,Object.keys(t).length]).range([70,0])(Object.keys(t).length-2)}).attr("fill","rgba(133, 193, 233, .5)");P.attr("transform",function(t,e,n){return"translate("+200/n.length*e+", "+(90-r.s().domain([0,Object.keys(t).length]).range([70,0])(Object.keys(t).length-2))+")"}),F.each(function(t,e,n){var a=t.leafData.data.map(function(t){return t.realVal}),i=r.s().domain([r.r(a),r.o(a)]).range([0,200]),l=r.s().domain([0,r.o(t.leafData.bins.map(function(t){return Object.keys(t).length}))-2]).range([70,0]);r.v(n[e]).append("g").classed("x-axis",!0).call(r.b(i)).attr("transform","translate(0, 90)"),r.v(n[e]).append("g").classed("y-axis",!0).call(r.c(l)).attr("transform","translate(0, 20)")});var D=T.filter(function(t){return"discrete"===t.type}),N=D.selectAll("g.ob-bars").data(function(t){return t.leafData.bins}).join("g").classed("ob-bars",!0),R=N.append("rect").attr("width",function(t,e,n){return 200/n.length}).attr("height",function(t,e,n){return r.s().domain([0,100]).range([70,0])(t.length)}).attr("fill",function(t,e){return null!=t[0]?t[0].color:"#fff"}).attr("opacity",.3);N.attr("transform",function(t,e,n){return"translate("+200/n.length*e+", "+(90-r.s().domain([0,100]).range([70,0])(t.length))+")"}),R.on("mouseover",function(t,e,n){var a=r.v("g."+t[0].label).selectAll("g.state");a.filter(function(e){return e[0].state===t[0].winState}).attr("opacity",.8),a.filter(function(e){return e[0].state!=t[0].winState}).attr("opacity",.1),r.v(n[e]).attr("opacity",.9)}).on("mouseout",function(t,e,n){r.v(n[e]).attr("opacity",.3);r.v("g."+t[0].label).selectAll("g.state").attr("opacity",.6)}),D.each(function(t,e,n){var a=t.leafData.bins.map(function(t){return null!=t[0]?t[0].winState:""}),i=r.u().domain(a).range([0,200]).padding(.6),l=r.s().domain([0,100]).range([70,0]);r.v(n[e]).append("g").classed("y-axis",!0).call(r.c(l).ticks(5)).attr("transform","translate(0, 20)"),r.v(n[e]).append("g").classed("x-axis",!0).call(r.b(i)).attr("transform","translate(0, 90)")})}function h(t,e){var n=r.v("#main"),a=x();n.selectAll("*").remove(),"View Paths"===r.v("#view-toggle").text()?(v(a,n,t),document.getElementById("scrunch").disabled=!0):(C(a,n,t,e),document.getElementById("scrunch").disabled=!1)}function g(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var m=[];function b(t,e){var n=m.filter(function(t){return"data-filter"===t.filterType}),a=n.map(function(t){return t.filterId}).indexOf(t);if(a!=n.length-1)for(var i=g(0===a?z[0]:n[a-1].data),l=(r.v("#toolbar").selectAll(".filter-tag").remove(),a+1);l<n.length;l++){var o=n[l].filterFunction;if("continuous"===n[l].attributeType){var s=o(i,n[l].selectedOption,n[l].predictedFilter,n[l].observedFilter);n[l].data=g(s),n[l].filterId="c-"+l,A(n[l],e),i=s}else{console.log("in discrete refilter",n[l]);var c=o(i,n[l].selectedOption,n[l].fromState,n[l].toState);n[l].data=g(c),console.log("in discrete refilter 2",n[l]),n[l].filterId="d-"+l,A(n[l],e),i=c}}var u=m.filter(function(e){return e.filterId!=t});m=u}function y(t,e,n,r,a,i,l){var o={filterType:t,attributeType:e,filterId:n,filterFunction:r,"before-data":a,data:i};return null!=l&&l.forEach(function(t){o[t[0]]=t[1]}),m.push(o),o}function x(){return m.length>0?m[m.length-1].data:z[0]}function w(t,e,n,a){var i=r.v("#filter-tab"),l=x();i.classed("hidden")?(t.text("Hide Filters"),i.classed("hidden",!1),e.style("padding-top","200px"),function(t,e,n,a,i){var l=Object.keys(e[0][0].attributes),o=m.filter(function(t){return"hide-attribute"===t.type}),s=o.length>0?o.map(function(t){return t.attribute}):[],c=t.append("div").classed("filter-wrap",!0);c.style("width","150px");var u=c.append("svg").classed("attr-toggle-svg",!0);u.append("text").text("Attributes: ").attr("x",20).attr("y",10);var d=u.append("g").attr("transform","translate(20, 25)").selectAll("g").data(l).join("g");d.attr("transform",function(t,e){return"translate(0,"+25*e+")"});var f=d.append("circle").attr("cx",0).attr("cy",0);f.classed("toggle",!0);var p=f.filter(function(t){return-1===s.indexOf(t)});p.classed("shown",!0),p.style("fill",function(t,e){return a.filter(function(e){return e.field===t})[0].catColor}),f.on("click",function(t,n){var l=r.v(this);!function(t,e){t.classed("shown")?(t.classed("shown",!1),t.style("fill","#fff")):(t.classed("shown",!0),t.style("fill",function(t,n){return e.filter(function(e){return e.field===t})[0].catColor}))}(l,a),m.push({type:"hide-attribute",attribute:t,"before-data":g(e)});var o=r.w(".shown"),s=a.filter(function(t){return-1===o.data().indexOf(t.field)}),c=m.filter(function(t){return"hide-attribute"!=t.type});s.forEach(function(t){c.push({type:"hide-attribute",attribute:t.field,"before-data":g(e),data:g(e)})}),m=c,h(a,i)}),d.append("text").text(function(t){return t}).style("font-size",10).attr("transform","translate(10, 4)")}(i,l,0,a,"edgeLength"),function(t,e,n,a,i,l){var o=["Select a Trait"].concat(Object.keys(n[0][0].attributes)),s=t.append("div").classed("filter-wrap",!0);s.style("width","200px"),s.append("h6").text("State Transition:");var c=j(s,o,"attr-select",""),u=s.append("div").classed("attribute-properties",!0);c.on("change",function(n){var o=r.v(this).property("value"),s=l.filter(function(t){return t.field===o})[0];if(u.selectAll("*").remove(),"discrete"===s.type){var c=["Any"],d=s.scales.map(function(t){return t.scaleName});c=c.concat(d);var f=j(u,c,"predicted-state","From"),p=j(u,c,"observed-state","To"),v=u.append("button").classed("btn btn-outline-success",!0);v.text("Filter"),v.on("click",function(){var n=f.node().classList[0],s=p.node().classList[0],c=(m.filter(function(t){return"data-filter"===t.filterType}),x()),u=S(c,o,n,s),d="d-"+m.filter(function(t){return"discrete"===t.attributeType}).length,v=y("data-filter","discrete",d,S,g(c),g(u),[["state",[n,s]],["selectedOption",o]]);h(l,i);var b=r.v("#sidebar").selectAll(".link"),w=r.v("#sidebar").selectAll(".node"),k=u.flatMap(function(t){return t.map(function(t){return t.node})});r.w(".link-not-there").classed("link-not-there",!1),r.w(".node-not-there").classed("node-not-there",!1);var O=b.filter(function(t){return-1===k.indexOf(t.data.node)});O.classed("link-not-there",!0);var j=w.filter(function(t){return-1===k.indexOf(t.data.node)});j.classed("node-not-there",!0),A(v,l),e.text("Show Filters"),t.selectAll("*").remove(),t.classed("hidden",!0),a.style("padding-top","0px")})}else{var b=r.s().domain([s.min,s.max]).range([60,0]),w=u.append("svg");w.attr("width",200).attr("height",100);var k=w.selectAll(".range").data([{label:"Ancestors",type:"predicted"},{label:"Leaves",type:"observed"}]).join("g").classed("range",!0);k.attr("transform",function(t,e){return"translate("+125*e+",20)"});var V=k.append("g");V.attr("transform","translate(10, 10)");var M=k.append("text").text(function(t){return t.label+": "});M.attr("x",0).attr("y",0);var L=V.append("rect").attr("width",20).attr("height",50);L.attr("x",10),V.append("g").attr("class","axis axis--y").attr("transform","translate(10,0)").call(r.c(b).ticks(3));var I=r.e().extent([[10,0],[30,60]]).on("end",function(){var t=r.i.selection;if(null==t)handle.attr("display","none");else t.map(b.invert)}),C=V.append("g").call(I);C.call(I.move,[0,60]);var E=u.append("button").classed("btn btn-outline-success",!0);E.text("Filter"),E.on("click",function(){var n=C._groups[0].map(function(t){return t.__brush.selection.map(function(t){return t[1]})}),s=n[0].map(b.invert).sort(),c=n[1].map(b.invert).sort(),u=m.filter(function(t){return"data-filter"===t.filterType}),d=u.length>0?u[u.length-1].data:z[0],f=O(d,o,s,c),p="c-"+m.filter(function(t){return"continuous"===t.attributeType}).length,v=y("data-filter","continuous",p,O,g(d),g(f),[["selectedOption",o],["predictedFilter",s],["observedFilter",c]]);h(l,i),A(v,l);var x=r.v("#sidebar").selectAll(".link"),w=r.v("#sidebar").selectAll(".node"),k=f.flatMap(function(t){return t.map(function(t){return t.node})});r.w(".link-not-there").classed("link-not-there",!1),r.w(".node-not-there").classed("node-not-there",!1);var S=x.filter(function(t){return-1===k.indexOf(t.data.node)});S.classed("link-not-there",!0);var j=w.filter(function(t){return-1===k.indexOf(t.data.node)});j.classed("node-not-there",!0),e.text("Show Filters"),t.selectAll("*").remove(),t.classed("hidden",!0),a.style("padding-top","0px")})}})}(i,t,l,e,n,a),function(t,e,n,a,i,l){var o=t.append("div").classed("search-bar-div",!0);o.append("h6").text("Query Filter:");var s=o.append("form").classed("form-inline",!0),c=s.append("input").classed("form-control mr-sm-2",!0);c.attr("type","search").attr("placeholder","Search by Species").attr("aria-label","Search"),s.append("button").classed("btn btn-outline-success my-2 my-sm-0",!0).attr("type","button").append("i").classed("fas fa-search",!0).on("click",function(){var o=c.node().value.split(" ").map(function(t){return t.toLowerCase()}),s=n.filter(function(t){var e=t.filter(function(t){return!0===t.leaf})[0].label;return o.indexOf(e)>-1});h(l,i);var u=r.v("#toolbar"),d=u.append("button").classed("btn btn-info",!0),f=d.append("span").classed("badge badge-light",!0);f.text(s.length),d.append("h6").text("Query Filter");var p=d.append("i").classed("close fas fa-times",!0);p.on("click",function(){h(l,i),d.remove()}),r.v("#main-path-view").style("height",function(){return 60*s.length+100*Object.keys(s[0][0].attributes).length+"px"}),e.text("Show Filters"),t.selectAll("*").remove(),t.classed("hidden",!0),a.style("padding-top","0px")})}(i,t,l,e,n,a)):(t.text("Show Filters"),i.selectAll("*").remove(),i.classed("hidden",!0),e.style("padding-top","0px"))}function A(t,e){var n=r.v("#toolbar");if("continuous"===t.attributeType){var a=r.j(".2s"),i=n.append("button").classed("btn btn-info filter-tag",!0);r.v(i).datum(t),i.append("span").classed("badge badge-light",!0).text(t.data.length),i.append("h6").text(t.selectedOption+"  Predicted: "+a(t.predictedFilter[0])+"-"+a(t.predictedFilter[1])+" Observed: "+a(t.observedFilter[0])+"-"+a(t.observedFilter[1])).append("i").classed("close fas fa-times",!0).on("click",function(){m.filter(function(t){return"data-filter"===t.filterType}).filter(function(e){return t.attribute!=e.attribute});b(t.filterId,e),h(e,"edgeLength"),r.w(".link-not-there").classed("link-not-there",!1),r.w(".node-not-there").classed("node-not-there",!1),i.remove()})}else if("discrete"===t.attributeType){var l=n.append("button").classed("btn btn-info filter-tag",!0);l.append("span").classed("badge badge-light",!0).text(t.data.length),l.append("h6").text(t.state[0]),l.append("i").classed("fas fa-arrow-right",!0),l.append("h6").text(t.state[1]+"  "),l.append("i").classed("close fas fa-times",!0).on("click",function(){b(t.filterId,e),h(e,"edgeLength"),r.w(".link-not-there").classed("link-not-there",!1),r.w(".node-not-there").classed("node-not-there",!1),l.remove()})}else if("branch"===t.attributeType){var o=n.append("button").classed("btn btn-info filter-tag",!0);o.append("span").classed("badge badge-light",!0).text(t.data.length),o.append("h6").text(" At Branch: "+t.nodeId),o.append("i").classed("close fas fa-times",!0).on("click",function(){b(t.filterId,e),h(e,"edgeLength"),r.w(".link-not-there").classed("link-not-there",!1),r.w(".node-not-there").classed("node-not-there",!1),o.remove()})}}function k(t,e){var n=x(),a=(m.filter(function(t){return"data-filter"===t.filterType}),n.filter(function(e){return e.map(function(t){return t.node}).indexOf(t)>-1}));A(y("data-filter","branch","b-"+m.filter(function(t){return"branch"===t.attributeType}).length,k,g(n),g(a),[["nodeId",t]]),e),h(e,"edgeLength");var i=r.v("#sidebar").selectAll(".link"),l=r.v("#sidebar").selectAll(".node"),o=a.flatMap(function(t){return t.map(function(t){return t.node})});r.w(".link-not-there").classed("link-not-there",!1),r.w(".node-not-there").classed("node-not-there",!1),i.filter(function(t){return-1===o.indexOf(t.data.node)}).classed("link-not-there",!0),l.filter(function(t){return-1===o.indexOf(t.data.node)}).classed("node-not-there",!0)}function O(t,e,n,r){return t.filter(function(t){return-1===t.map(function(t){var a=t.attributes[e].realVal;return 1==t.leaf?a>r[0]&&a<r[1]:a>n[0]&&a<n[1]}).indexOf(!1)})}function S(t,e,n,r){if(null!=e)return t.filter(function(t){var a=t.filter(function(t){return 1!=t.leaf}).map(function(t){var r=t.attributes[e].states;return"Any"===n||r.filter(function(t){return t.state===n}).length>0&&r.filter(function(t){return t.state===n})[0].realVal>.75}),i=t.filter(function(t){return!0===t.leaf}).map(function(t){var n=t.attributes[e].winState;return"Any"===r||n===r});return a.indexOf(!0)>-1&&i.indexOf(!0)>-1})}function j(t,e,n,a){var i=t.append("div").classed("selector",!0);i.append("h6").text(a);return i.append("select").attr("id",n).attr("class","Any").selectAll("option").data(e).join("option").text(function(t){return t}).attr("value",function(t){return t}),r.v("#"+n).on("change",function(t){var e=r.v(this).property("value");r.v(this).attr("class",e)}),r.v("#"+n)}function V(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var M=[];function L(t,e,n,a){var i=r.v("div#selected"),l=r.v("div#main");if(null===t){M=[],r.v("div#selected").selectAll("*").remove(),i.style("height",0),r.v("div#main").style("padding-top","0px");var o=r.v("div#main");C(V(e),o,n,a)}else{var s=function(t,e,n,a,i){var l=t.flatMap(function(t){return t.filter(function(t){return!0===t.leaf}).map(function(t){return t.node})}),o=r.v("#sidebar").select("svg").selectAll(".node");o.filter(function(t){return l.indexOf(t.data.node)>-1}).classed("selected",!0);var s=m.filter(function(t){return"hide-attribute"===t.type}).length>0?m.filter(function(t){return"hide-attribute"===t.type}).map(function(t){return t.attribute}):[],c=s.length>0?a.filter(function(t){return-1===s.indexOf(t.field)}).map(function(t){return t.field}):null,u=n.select(".selected-toolbar"),f=u.empty()?n.append("div").classed("selected-toolbar",!0):u;f.selectAll("*").remove();var p=f.append("div").style("display","inline-block");p.append("text").text("Topology: ");var h=p.append("button").classed("btn btn-secondary btn-sm",!0);h.text("Sort Most to Least"),h.on("click",function(){var t;"Sort Most to Least"===(t=h).text()?t.text("Sort Least to Most"):t.text("Sort Most to Least")});var g=a.map(function(t){return t.field}),b=f.append("div").style("display","inline-block");b.append("h6").text("Sort by: ").style("display","inline");var y=b.selectAll("div.attr-radio").data(g).join("div").classed("attr-radio form-check form-check-inline",!0),x=y.append("input").attr("type","radio").property("name","attribute-radio-sort").property("value",function(t){return t}).attr("id",function(t,e){return"radio-"+e}).classed("form-check-input",!0);y.append("label").text(function(t){return t}).property("for",function(t,e){return"radio-"+e}).classed("form-check-label",!0);var w=n.select("svg.select-svg"),A=w.empty()?n.append("svg").classed("select-svg",!0):w;A.selectAll("*").remove();var k=t.flatMap(function(t){return t.flatMap(function(t){return t.node})}).reduce(function(t,e){return void 0===t[e]?t[e]=1:t[e]+=1,t},{});if(1===t.length){var O=A.append("g").classed("select-wrap",!0);O.attr("transform",function(t,e){return"translate(0,20)"});var S=r.t().range([6,14]).domain([1,r.o(Object.values(k))]),j=O.selectAll(".paths").data(t).join("g").classed("paths",!0),M=j.append("rect").classed("path-rect",!0);M.attr("y",-8);var I=j.append("g").classed("x-icon",!0);I.attr("transform","translate(15, 10)"),I.append("circle").attr("r",7).attr("fill","#fff"),I.append("text").text("x").attr("transform","translate(-5, 5)"),I.style("cursor","pointer"),I.on("click",function(t,e,n){r.w(".high").classed("high",!1),r.w(".low").classed("low",!1),o.select(".selected").classed("selected",!1),L(null,z[0],a,i)}),j.on("mouseover",function(t,e){var n=r.v("#sidebar").selectAll(".node"),a=r.v("#sidebar").selectAll(".link");return n.filter(function(e){return t.map(function(t){return t.node}).indexOf(e.data.node)>-1}).classed("hover",!0),a.filter(function(e){return t.map(function(t){return t.node}).indexOf(e.data.node)>-1}).classed("hover",!0),r.v(this).classed("hover",!0)}).on("mouseout",function(t,e){r.v("#sidebar").selectAll(".node").classed("hover",!1),r.v("#sidebar").selectAll(".link").classed("hover",!1);return r.v(this).classed("hover",!1)});var T=j.append("text").text(function(t){var e=t.filter(function(t){return!0===t.leaf})[0].label;return e.charAt(0).toUpperCase()+e.slice(1)});T.attr("x",25).attr("y",15);var D=j.append("g").classed("time-line",!0);D.attr("transform",function(t,e){return"translate(150, 0)"});D.append("line").attr("x1",0).attr("x2",1e3).attr("y1",15).attr("y2",15);var N=D.selectAll(".node").data(function(t){return t}).join("g").classed("node",!0);N.attr("transform",function(t){var e=r.s().domain([0,1]).range([0,1e3]),n="move"===i?t.move:e(t.edgeMove);return"translate("+n+", 10)"});var R=N.append("circle").attr("cx",0).attr("cy",0).attr("r",function(t){return S(k[t.node])}).attr("class",function(t,e){return"node-"+t.node});R.on("mouseover",function(t,e){var n=N.filter(function(e){return e.node===t.node}),a=r.v("#sidebar").selectAll(".node");a.filter(function(e){return e.data.node===t.node}).classed("selected-branch",!0);return n.classed("hover-branch",!0)}).on("mouseout",function(t,e){var n=N.filter(function(e){return e.node===t.node});return r.w(".selected-branch").classed("selected-branch",!1),n.classed("hover-branch",!1)});N.filter(function(t){return null!=t.label}).append("text").text(function(t){var e=t.label.charAt(0).toUpperCase()+t.label.slice(1);return e}).attr("x",10).attr("y",5);j.attr("transform",function(t,e){return"translate(0,"+60*e+")"});var _=j.select(".time-line").selectAll(".node");_.on("mouseover",function(t,n){var r=e.filter(function(e){var n=e.flatMap(function(t){return t.node});return n.indexOf(t.node)>-1}),a=r[0],i=r[1];console.log(a,i)});var B=j.append("g").classed("attribute-wrapper",!0),U=d(t,a,c),H=E(B,U,a,null);return j.attr("transform",function(t,e){return"translate(10,"+e*(50*(Object.keys(t[1].attributes).length+1))+")"}),F(H),P(H,a),A.style("height","250px"),n.style("height",45*(t.length+H.data().map(function(t){return t[0]}).length)+50+"px"),B.attr("transform",function(t){return"translate(140, 25)"}),r.w(".selected-path").classed("selected-path",!1),x.on("click",function(n,l){var s=t.map(function(t){return t.filter(function(t){return!0===t.leaf})[0]})[0],c=V(e).sort(function(t,e){return t.filter(function(t){return!0===t.leaf})[0].attributes[n].realVal-e.filter(function(t){return!0===t.leaf})[0].attributes[n].realVal}),u=r.v("div#main");C(c.reverse(),u,a,i),u.style("padding-top","250px");var d=u.select("svg#main-path-view").selectAll(".paths"),f=d.filter(function(t){var e=t.filter(function(t){return!0===t.leaf})[0];return e.attributes[n].realVal>s.attributes[n].realVal});f.classed("high",!0);var p=f.data().map(function(t){return t.filter(function(t){return!0===t.leaf})[0].node});o.filter(function(t){return p.indexOf(t.data.node)>-1}).classed("high",!0);var v=d.filter(function(t){var e=t.filter(function(t){return!0===t.leaf})[0];return e.attributes[n].realVal<s.attributes[n].realVal});v.classed("low",!0);var h=v.data().map(function(t){return t.filter(function(t){return!0===t.leaf})[0].node});o.filter(function(t){return h.indexOf(t.data.node)>-1}).classed("low",!0);var g=d.filter(function(t){var e=t.filter(function(t){return!0===t.leaf})[0];return e.attributes[n].realVal===s.attributes[n].realVal});g.classed("same",!0)}),t}if(t.length>1&&t.length<5){var X=function(t){var e=r.o(t.map(function(t){return t.length})),n=t.filter(function(t){return t.length===e})[0].filter(function(t){return 1!=t.leaf});t.map(function(t){n=V(t).filter(function(t){return n.map(function(t){return t.node}).indexOf(t.node)>-1&1!=t.leaf})});var a=t.map(function(t){var e=(t=!0===t[0].leaf?t.reverse():t).map(function(t){return t.node}),r=e.indexOf(n[n.length-1].node),a=t.filter(function(t,e){return e>r});return a});return n[n.length-1].children=a.map(function(t,e){var a=r.o(t.map(function(t){return t.edgeMove}))-n[n.length-1].edgeMove;return t.map(function(t,i,l){t.parentBase=n[n.length-1].edgeMove,t.move=t.edgeMove-n[n.length-1].edgeMove,t.base=0===i?0:l[i-1].edgeMove-n[n.length-1].edgeMove;var o=r.s().domain([0,1]).range([0,1e3])(n[n.length-1].edgeMove);return t.xScale=r.s().domain([0,a]).range([0,1e3-o]),t.level=e,t})}),n}(t),Y=A.append("g").classed("select-wrap",!0);Y.attr("transform",function(t,e){return"translate(0,20)"});var q=r.t().range([6,14]).domain([1,r.o(Object.values(k))]),Q=Y.selectAll(".paths").data([X]).join("g").classed("paths",!0),G=Q.append("rect").classed("path-rect",!0);G.attr("y",-8);var K=Q.append("g").classed("x-icon",!0);K.attr("transform","translate(15, 10)"),K.append("circle").attr("r",7).attr("fill","#fff"),K.append("text").text("x").attr("transform","translate(-5, 5)"),K.style("cursor","pointer"),K.on("click",function(t,e,n){r.w(".high").classed("high",!1),r.w(".low").classed("low",!1),o.select(".selected").classed("selected",!1),L(null,z[0],a,i)});var W=Q.append("g").classed("time-line",!0);W.attr("transform",function(t,e){return"translate(150, 0)"});W.append("line").attr("x1",0).attr("x2",function(t,e){var n=r.s().domain([0,1]).range([0,1e3]);return n(t[t.length-1].edgeMove)}).attr("y1",15).attr("y2",15);var Z=W.selectAll(".node").data(function(t){return t}).join("g").classed("node",!0);Z.attr("transform",function(t){var e=r.s().domain([0,1]).range([0,1e3]),n="move"===i?t.move:e(t.edgeMove);return"translate("+n+", 10)"}),Z.classed("common-node",!0);var $=Z.filter(function(t){return null!=t.children}).selectAll("g.child").data(function(t){return t.children}).join("g").classed("child",!0),tt=$.selectAll("g.node").data(function(t){return t}).join("g").classed("node",!0);tt.attr("transform",function(t,e,n){return"translate("+t.xScale(t.move)+", "+20*t.level+")"}),$.append("path").attr("d",function(t,e,n){var a=[{x:0,y:0},{x:0,y:e}];t.map(function(t){a.push({x:t.xScale(t.move),y:t.level})});var i=r.n().curve(r.g).x(function(t){return t.x}).y(function(t){return 20*t.y});return i(a)}).attr("stoke-width","2px").attr("fill","none").attr("stroke","gray"),$.on("mouseover",function(t,e){t.map(function(t){return t.species});var n=Z.filter(function(e){return e.node===t.node}),a=V(X).map(function(t){return t.node}).concat(t.map(function(t){return t.node})),i=r.v("#sidebar").selectAll(".node"),l=r.v("#sidebar").selectAll(".link");return i.filter(function(t){return a.indexOf(t.data.node)>-1}).classed("hover",!0),l.filter(function(t){return a.indexOf(t.data.node)>-1}).classed("hover",!0),n.classed("hover-branch",!0)}).on("mouseout",function(t,e){r.w(".hover").classed("hover",!1)});Z.append("circle").attr("cx",0).attr("cy",0).attr("r",function(t){return q(k[t.node])}).attr("class",function(t,e){return"node-"+t.node});var et=tt.append("circle").attr("r",7).attr("fill","red").attr("y",5);et.on("mouseover",function(t,e){var n=Z.filter(function(e){return e.node===t.node}),a=r.v("#sidebar").selectAll(".node");a.filter(function(e){return e.data.node===t.node}).classed("selected-branch",!0);return n.classed("hover-branch",!0)}).on("mouseout",function(t,e){var n=Z.filter(function(e){return e.node===t.node});return r.w(".selected-branch").classed("selected-branch",!1),n.classed("hover-branch",!1)}),tt.filter(function(t){return!0===t.leaf}).append("text").text(function(t){return t.label}).attr("x",9).attr("y",4);var nt=A.append("g").classed("attribute-wrapper",!0),rt=(X[X.length-1].children.map(function(t){return V(X).concat(t)}),d(t,a,c)),at=rt[0].map(function(e,n){var r=t[0].filter(function(t){return!0===t.leaf})[0].label;e[e.length-1].offset=0;for(var a={label:e[e.length-1].label,data:[{species:r,paths:e}]},i=1;i<rt.length;i++){var l=t[i].filter(function(t){return!0===t.leaf})[0].label,o=rt[i][n].length-1;rt[i][n][o].offset=8*i,a.data.push({species:l,paths:rt[i][n]})}return a}),it=nt.selectAll("g").data(at).join("g").classed("attr",!0);it.attr("transform",function(e,n){return"translate(140,"+(32+20*t.length+50*n)+")"});var lt=it.selectAll("g.path-grp").data(function(t,e){var n=t.data.map(function(t){return t.paths.map(function(n){return n.species=t.species,n.index=e,n}),t.paths});return n}).join("g").classed("path-grp",!0),ot=F(lt,i,J),st=ot.selectAll(".val-bar").on("mouseover",function(t,e){var n=r.v("#tooltip");n.transition().duration(200).style("opacity",.9);var a=r.j(".3f");n.html(t.species+": "+a(t.realVal)).style("left",r.i.pageX+"px").style("top",r.i.pageY-28+"px")}).on("mouseout",function(t){var e=r.v("#tooltip");e.transition().duration(500).style("opacity",0)});st.attr("opacity",.4);var ct=P(lt,i,J);ct.selectAll(".dots").style("opacity",.4);var ut=ct.filter(function(t){return!0===t.leaf});ut.attr("transform",function(t){return"translate(1000,"+t.offset+")"}),ut.selectAll("circle").attr("stroke","#fff").attr("stroke-width","1px"),ut.selectAll("circle").on("mouseover",function(t,e){var n=r.v("#tooltip");n.transition().duration(200).style("opacity",.9),n.html(t.species+": "+t.winState).style("left",r.i.pageX+"px").style("top",r.i.pageY-28+"px")}).on("mouseout",function(t){var e=r.v("#tooltip");e.transition().duration(500).style("opacity",0)});var dt=lt.filter(function(t,e){return 0===e}).append("text").text(function(t){return t[t.length-1].label});return dt.classed("attribute-label",!0),dt.attr("transform","translate(-15, 20)"),r.v("#selected").style("height",50+20*t.length+53*at.length+"px"),A.style("height",50+20*t.length+53*at.length+"px"),G.style("height",25*X[X.length-1].children.length+"px"),r.w(".selected-path").classed("selected-path",!1),x.on("click",function(n,l){var s=t.map(function(t){return t.filter(function(t){return!0===t.leaf})[0]})[0],c=V(e).sort(function(t,e){return t.filter(function(t){return!0===t.leaf})[0].attributes[n].realVal-e.filter(function(t){return!0===t.leaf})[0].attributes[n].realVal}),u=r.v("div#main");C(c.reverse(),u,a,i),u.style("padding-top","250px");var d=u.select("svg#main-path-view").selectAll(".paths"),f=d.filter(function(t){var e=t.filter(function(t){return!0===t.leaf})[0];return e.attributes[n].realVal>s.attributes[n].realVal});f.classed("high",!0);var p=f.data().map(function(t){return t.filter(function(t){return!0===t.leaf})[0].node});o.filter(function(t){return p.indexOf(t.data.node)>-1}).classed("high",!0);var v=d.filter(function(t){var e=t.filter(function(t){return!0===t.leaf})[0];return e.attributes[n].realVal<s.attributes[n].realVal});v.classed("low",!0);var h=v.data().map(function(t){return t.filter(function(t){return!0===t.leaf})[0].node});o.filter(function(t){return h.indexOf(t.data.node)>-1}).classed("low",!0);var g=d.filter(function(t){var e=t.filter(function(t){return!0===t.leaf})[0];return e.attributes[n].realVal===s.attributes[n].realVal});g.classed("same",!0)}),X}var ft=r.o(t.map(function(t){return t.length})),pt=t.filter(function(t){return t.length===ft})[0],vt=pt.filter(function(t){return 1!=t.leaf}),ht=vt;t.map(function(t){ht=V(t).filter(function(t){return ht.map(function(t){return t.node}).indexOf(t.node)>-1&1!=t.leaf})}),A.remove();var gt=f.append("g").classed("x-icon",!0);return gt.attr("transform","translate(15, 10)"),gt.append("circle").attr("r",7).attr("fill","#fff"),gt.append("text").text("x").attr("transform","translate(-5, 5)"),gt.style("cursor","pointer"),gt.on("click",function(t,e,n){r.w(".high").classed("high",!1),r.w(".low").classed("low",!1),o.select(".selected").classed("selected",!1),L(null,z[0],a,i)}),v(t,n,a),n.style("height","550px"),r.w(".selected-path").classed("selected-path",!1),x.on("click",function(n,l){var s=t.map(function(t){return t.filter(function(t){return!0===t.leaf})[0]})[0],c=V(e).sort(function(t,e){return t.filter(function(t){return!0===t.leaf})[0].attributes[n].realVal-e.filter(function(t){return!0===t.leaf})[0].attributes[n].realVal}),u=r.v("div#main");C(c.reverse(),u,a,i),u.style("padding-top","250px");var d=u.select("svg#main-path-view").selectAll(".paths"),f=d.filter(function(t){var e=t.filter(function(t){return!0===t.leaf})[0];return e.attributes[n].realVal>s.attributes[n].realVal});f.classed("high",!0);var p=f.data().map(function(t){return t.filter(function(t){return!0===t.leaf})[0].node});o.filter(function(t){return p.indexOf(t.data.node)>-1}).classed("high",!0);var v=d.filter(function(t){var e=t.filter(function(t){return!0===t.leaf})[0];return e.attributes[n].realVal<s.attributes[n].realVal});v.classed("low",!0);var h=v.data().map(function(t){return t.filter(function(t){return!0===t.leaf})[0].node});o.filter(function(t){return h.indexOf(t.data.node)>-1}).classed("low",!0);var g=d.filter(function(t){var e=t.filter(function(t){return!0===t.leaf})[0];return e.attributes[n].realVal===s.attributes[n].realVal});g.classed("same",!0)}),ht}(V(M=M.concat(t)),V(e),i,n,a);C(function(t,e,n){if(!(t.length>1)){var r=t[0].reverse().map(function(t){return t.node}),a=e.map(function(t){var e=t.reverse().map(function(t,e){return r.indexOf(t.node),{indexOf:r.indexOf(t.node),pathIndex:e,node:t,chosen:r[r.indexOf(t.node)]}}).filter(function(t){return t.indexOf>-1}),n=e[0].indexOf+e[0].pathIndex;return{data:t.reverse(),distance:n}}),i=a.sort(function(t,e){return t.distance-e.distance});return i}if(null!=n){var l=n.reverse().map(function(t){return t.node}),o=e.map(function(t){var e=t.reverse().map(function(t,e){return l.indexOf(t.node),{indexOf:l.indexOf(t.node),pathIndex:e,node:t,chosen:l[l.indexOf(t.node)]}}).filter(function(t){return t.indexOf>-1}),n=e[0].indexOf+e[0].pathIndex;return{data:t.reverse(),distance:n}}),s=o.sort(function(t,e){return t.distance-e.distance});return s}console.error("multiple paths without common node")}(V(M),V(e),V(s)).map(function(t){return t.data}),l,n,a);l.style("padding-top","250px")}}function I(t,e,n,r,a,i,l){try{var o=t[i](l),s=o.value}catch(t){return void n(t)}o.done?e(s):Promise.resolve(s).then(r,a)}function C(t,e,n,a){var i=!0,l=r.v("#scrunch").attr("value");e.select("#main-path-view").selectAll("*").remove();var o=function(t,e,n,a){var i=e.select("#main-path-view"),l=i.empty()?e.append("svg").attr("id","main-path-view"):i,o=!1,s=l.select(".path-wrapper"),c=s.empty()?l.append("g").classed("path-wrapper",!0):s;c.attr("transform",function(t,e){return"translate(0,20)"});var u=t.flatMap(function(t){return t.flatMap(function(t){return t.node})}).reduce(function(t,e){return void 0===t[e]?t[e]=1:t[e]+=1,t},{}),d=r.t().range([6,14]).domain([1,r.o(Object.values(u))]),f=c.selectAll(".paths").data(t).join("g").classed("paths",!0);f.append("rect").classed("path-rect",!0).attr("y",-8);var p=f.append("g").classed("fas fa-search-plus",!0);p.attr("transform","translate(15, 10)"),p.append("circle").attr("r",7).attr("fill","#fff"),p.append("text").text("+").attr("transform","translate(-5, 5)"),p.style("cursor","pointer"),p.on("click",function(t,e,i){var l=r.w(i).filter(function(t,n){return n!=e}).classed("selected-path",!1);r.v(i[e]).classed("selected-path")?(r.v(i[e]).classed("selected-path",!1),L(null,l.data(),n,a)):(r.v(i[e]).classed("selected-path",!0),L([t],l.data(),n,a))}),f.on("mouseover",function(t,e){var n=r.v("#sidebar").selectAll(".node"),a=r.v("#sidebar").selectAll(".link");return n.filter(function(e){return t.map(function(t){return t.node}).indexOf(e.data.node)>-1}).classed("hover",!0),a.filter(function(e){return t.map(function(t){return t.node}).indexOf(e.data.node)>-1}).classed("hover",!0),r.v(this).classed("hover",!0)}).on("mouseout",function(t,e){r.v("#sidebar").selectAll(".node").classed("hover",!1),r.v("#sidebar").selectAll(".link").classed("hover",!1);return r.v(this).classed("hover",!1)}),f.append("text").text(function(t){var e=t.filter(function(t){return!0===t.leaf})[0].label;return e.charAt(0).toUpperCase()+e.slice(1)}).attr("x",25).attr("y",15);var v=f.append("g").classed("time-line",!0);v.attr("transform",function(t,e){return"translate(150, 0)"});v.append("line").attr("x1",0).attr("x2",1e3).attr("y1",15).attr("y2",15);var h=v.selectAll(".node").data(function(t){return t}).join("g").attr("class",function(t,e,n){return r.v(n[n.length-1]).data()[0].label+" node"});h.attr("transform",function(t){var e=r.s().domain([0,1]).range([0,1e3]),n="move"===a?t.move:e(t.edgeMove);return"translate("+n+", 10)"}),h.on("click",function(t,e,i){o?(o=!1,r.v("#branch-tooltip").classed("hidden",!0)):(o=!0,r.v("#branch-tooltip").style("left",r.i.pageX+"px").style("top",r.i.pageY-28+"px").select("#value").text(t.node),r.v("#branch-tooltip").classed("hidden",!1),r.v("#filter-by-node").on("click",function(){k(t.node,n),o=!1,r.v("#branch-tooltip").classed("hidden",!0)}),r.v("#select-by-node").on("click",function(){x();var e=f.filter(function(e){return e.map(function(t){return t.node}).indexOf(t.node)>-1}),i=f.filter(function(e){return-1===e.map(function(t){return t.node}).indexOf(t.node)});o=!1,r.v("#branch-tooltip").classed("hidden",!0),L(e.data(),i.data(),n,a)}))}),h.append("circle").attr("cx",0).attr("cy",0).attr("r",function(t){return d(u[t.node])}).attr("class",function(t,e){return"node-"+t.node}).on("mouseover",function(t,e){var n=h.filter(function(e){return e.node===t.node}),a=r.v("#sidebar").selectAll(".node");a.filter(function(e){return e.data.node===t.node}).classed("selected-branch",!0);return n.classed("hover-branch",!0)}).on("mouseout",function(t,e){var n=h.filter(function(e){return e.node===t.node});return r.w(".selected-branch").classed("selected-branch",!1),n.classed("hover-branch",!1)});h.filter(function(t){return null!=t.label}).append("text").text(function(t){var e=t.label.charAt(0).toUpperCase()+t.label.slice(1);return e}).attr("x",10).attr("y",5);return f}(t,e,n,a),s=o.append("g").classed("attribute-wrapper",!0),c=m.filter(function(t){return"hide-attribute"===t.type}).map(function(t){return t.attribute}),u=c.length>0?n.filter(function(t){return-1===c.indexOf(t.field)}).map(function(t){return t.field}):null,f=d(t,n,u),p=null===u?n.length:u.length,v=E(s,f,n,null,l),b="true"===l?22:45;o.attr("transform",function(t,e){return"translate(10,"+e*((b+5)*(p+1))+")"});F(v,a,l),P(v,n,a,l);return function(t,e,n,r){t.style("height",n.length*(r+52)+"px"),e.attr("transform",function(t){return"translate(140, 25)"})}(e.select("#main-path-view"),s,t,p*b),console.log("state leaf",r.w(".discrete-leaf")),r.w(".discrete-leaf").on("click",function(t,e){i?(i=!1,r.v("#state-tooltip").classed("hidden",!0)):(i=!0,r.v("#state-tooltip").style("left",r.i.pageX+"px").style("top",r.i.pageY-28+"px").select("#value").text(t.winState),r.v("#state-tooltip").classed("hidden",!1),r.v("#filter-by-state").on("click",function(){!function(t,e){var n=x(),a=(m.filter(function(t){return"data-filter"===t.filterType}),n.filter(function(e){return e[e.length-1].attributes[t.label].winState===t.winState}));A(y("data-filter","leaf","l-"+m.filter(function(t){return"leaf"===t.attributeType}).length,k,g(n),g(a),[["leafState",[t.label,t.winState]]]),e),h(e,"edgeLength");var i=r.v("#sidebar").selectAll(".link"),l=r.v("#sidebar").selectAll(".node"),o=a.flatMap(function(t){return t.map(function(t){return t.node})});r.w(".link-not-there").classed("link-not-there",!1),r.w(".node-not-there").classed("node-not-there",!1),i.filter(function(t){return-1===o.indexOf(t.data.node)}).classed("link-not-there",!0),l.filter(function(t){return-1===o.indexOf(t.data.node)}).classed("node-not-there",!0)}(t,n),i=!1,r.v("#state-tooltip").classed("hidden",!0)}),r.v("#select-by-state").on("click",function(){var e=x(),l=e.filter(function(e){return e[e.length-1].attributes[t.label].winState===t.winState}),o=e.filter(function(e){return e[e.length-1].attributes[t.label].winState!=t.winState});i=!1,r.v("#state-tooltip").classed("hidden",!0),L(l,o,n,a)}))}),o}function E(t,e,n,r,a){var i="true"===a?20:45,l=t.selectAll("g").data(function(t,n){return e[n]}).join("g");l.attr("transform",function(t,e){return"translate(0, "+e*(i+5)+")"});var o=l.append("text").text(function(t){return t[t.length-1].label});return o.classed("attribute-label",!0),o.attr("transform","translate(-15, 20)"),l}function T(){var t;return t=regeneratorRuntime.mark(function t(e,n,a){var i,l,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.data().forEach(function(t){var e;(e=t).map(function(t,n){var r=0===n?0:1,a=t.realVal>e[n-r].realVal?1:18;t.change=a})}),i="true"===a?20:45,l=r.n().x(function(t){var e=r.s().domain([0,1]).range([0,1e3]);return"move"===n?t.move:e(t.edgeMove)}).y(function(t){var e=t.yScale;return e.range([i,0]),"true"===a?t.change:e(t.realVal)}),o=e.append("path").attr("d",l).attr("class","inner-line").style("stroke",function(t){return t[0].color}),t.abrupt("return",o);case 5:case"end":return t.stop()}},t)}),(T=function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function l(t){I(i,r,a,l,o,"next",t)}function o(t){I(i,r,a,l,o,"throw",t)}l(void 0)})}).apply(this,arguments)}function F(t,e,n){var a=t.filter(function(t){return null!=t[t.length-1]?"continuous"===t[t.length-1].type:"continuous"===t.type}),i="true"===n?20:45,l=a.append("g").classed("attribute-time-line",!0);!function(t,e,n){T.apply(this,arguments)}(l,e,n);l.append("rect").classed("attribute-rect",!0).attr("height",i);var o=l.selectAll("g").data(function(t){return t}).join("g").classed("attribute-node",!0),s=o.append("g").classed("inner-bars",!0);s.append("rect").classed("attribute-inner-bar",!0).attr("height",i),s.attr("transform",function(t){var n=r.s().domain([0,1]).range([0,1e3]);return"translate("+("move"===e?t.move:n(t.edgeMove))+", 0)"});var c=s.append("rect").classed("range-rect",!0);return c.attr("width",20).attr("height",function(t,e){var r=t.yScale;r.range([i,0]);var a=t.leaf?0:r(t.lowerCI95)-r(t.upperCI95);return"true"===n?20:a}),c.attr("transform",function(t,e){var r=t.yScale;return r.range([i,0]),"translate(0, "+(t.leaf||"true"===n?0:r(t.upperCI95))+")"}),c.style("fill",function(t){return t.colorScale(t.realVal)}),c.attr("opacity",function(t){return t.satScale(t.realVal)}),"true"!=n&&s.append("rect").attr("width",20).attr("height",5).attr("transform",function(t,e){var n=t.yScale;return n.range([i,0]),"translate(0, "+n(t.realVal)+")"}).attr("fill",function(t){return t.color}).classed("val-bar",!0),s.on("mouseover",function(t,e,n){var a=t.yScale;a.range([0,i]),r.v(n[e]).append("g").classed("y-axis",!0).call(r.c(a).ticks(5))}).on("mouseout",function(t,e,n){r.v(n[e]).select("g.y-axis"),r.v(n[e]).select("g.y-axis").remove()}),o}function P(t,e,n,a){var i=t.filter(function(t){return"discrete"===t[t.length-1].type}),l="true"===a?20:45,o=i.append("g").classed("attribute-time-line",!0);o.append("line").classed("half",!0).attr("x1",0).attr("y1",22).attr("x2",1010).attr("y2",22);var s=o.selectAll("g").data(function(t){var e=t.map(function(t){return 1==t.leaf?t.states.map(function(e){return e.move=t.move,e.edgeMove=t.edgeMove,e.color=t.color,e}):t});return e[0].map(function(t){return t.state}).map(function(t){return e.map(function(e){return e.filter(function(e){return e.state==t})[0]})})}).join("g").classed("state-path",!0),c=r.n().x(function(t){var e=r.s().domain([0,1]).range([0,1e3]);return("move"===n?t.move:e(t.edgeMove))+7}).y(function(t){return r.s().domain([0,1]).range([l-2,1])(t.realVal)});s.append("path").attr("d",c).attr("class",function(t,e){return t[0].species+" inner-line"}).style("stroke-width",.7).style("stroke",function(t){return t[0].color});o.append("rect").classed("attribute-rect",!0).attr("height",l);var u=o.selectAll(".attribute-node-discrete").data(function(t){return t}).join("g").classed("attribute-node-discrete",!0);u.attr("transform",function(t){var e=r.s().domain([0,1]).range([0,1e3]);return t[0]?"translate("+("move"===n?t[0].move:e(t[0].edgeMove))+", 0)":"translate("+("move"===n?t.move:e(t.edgeMove))+", 0)"}),u.append("rect").attr("width",20).attr("height",l).attr("opacity",0),u.append("line").attr("x1",10).attr("x2",10).attr("y1",0).attr("y2",l),u.on("mouseover",function(t,e,n){var a=r.s().domain([1,0]);a.range([0,l]),r.v(n[e]).append("g").classed("y-axis",!0).call(r.c(a).ticks(3))}).on("mouseout",function(t,e,n){r.v(n[e]).select("g.y-axis"),r.v(n[e]).select("g.y-axis").remove()});var d=u.filter(function(t,e){return null!=t[0]}).selectAll(".dots").data(function(t){return t}).join("circle").classed("dots",!0);d.attr("cx",10).attr("cy",function(t){return r.s().domain([0,1]).range([l-2,2])(t.realVal)}).attr("r",2).style("fill",function(t){return t.color}),d.filter(function(t){return t.realVal>.5}).attr("r",4),d.on("mouseover",function(t){var e=r.v("#tooltip");e.transition().duration(200).style("opacity",.9);var n=r.j(".3f");e.html(t.state+": "+n(t.realVal)).style("left",r.i.pageX+"px").style("top",r.i.pageY-28+"px")}).on("mouseout",function(t){r.v("#tooltip").transition().duration(500).style("opacity",0)});var f=u.filter(function(t,e){return void 0===t[0]}).classed("discrete-leaf",!0);return f.append("circle").attr("cx",10).attr("cy",2).attr("r",7).style("fill",function(t){return t.color}),f.append("text").text(function(t){return t.winState}).attr("transform","translate(20, 5)").style("font-size",10),u}function D(t,e,n,r,a,i,l){try{var o=t[i](l),s=o.value}catch(t){return void n(t)}o.done?e(s):Promise.resolve(s).then(r,a)}function N(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function R(t,e){return function t(e,n){return e.children=n.filter(function(t){return String(t.V1)===String(e.node)}),e.name=String(e.node),e.children.length>0?(e.children.forEach(function(e){return t(e,n)}),e):e}(t[0][0],e.rows)}function _(t,e){var n=this,a=r.v("#sidebar"),i=r.v("#toolbar"),l=(m.length,z[0]),o=U(l,a.select("svg").select("g").selectAll(".node").filter(function(t){return t.y>r.i.selection[0][0]&&t.y<r.i.selection[1][0]&&t.x>r.i.selection[0][1]&&t.x<r.i.selection[1][1]}).classed("selected",!0).data().map(function(t){return t.data.node})),s="brush-"+m.filter(function(t){return"topology"===t.attributType}).length;y("data-filter","topology",s,U,N(l),N(o),null);h(e,"edgeLength");var c=r.v("#sidebar").selectAll(".link"),u=r.v("#sidebar").selectAll(".node"),d=o.flatMap(function(t){return t.map(function(t){return t.node})});r.w(".link-not-there").classed("link-not-there",!1),r.w(".node-not-there").classed("node-not-there",!1),c.filter(function(t){return-1===d.indexOf(t.data.node)}).classed("link-not-there",!0),u.filter(function(t){return-1===d.indexOf(t.data.node)}).classed("node-not-there",!0);var f=i.append("button").classed("btn btn-info",!0);f.append("span").classed("badge badge-light",!0).text(o.length),f.append("h6").text("Tree Filter").append("i").classed("close fas fa-times",!0).on("click",function(){var a,i=(a=regeneratorRuntime.mark(function a(i,l,o){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b(s),a.next=3,h(e,"edgeLength");case 3:r.w(".selected").classed("selected",!1),r.w(".link-not-there").classed("link-not-there",!1),r.w(".node-not-there").classed("node-not-there",!1),f.remove(),r.v(n).call(t.move,null),r.v(".tree-brush").remove();case 9:case"end":return a.stop()}},a)}),function(){var t=this,e=arguments;return new Promise(function(n,r){var i=a.apply(t,e);function l(t){D(i,n,r,l,o,"next",t)}function o(t){D(i,n,r,l,o,"throw",t)}l(void 0)})});return function(t,e,n){return i.apply(this,arguments)}}())}function B(t,e,n,a){var i=a.append("button").text("Filter by Tree").classed("btn btn-outline-secondary",!0),l=r.d().extent([[0,0],[400,600]]).on("end",function(t,e,r){return _(l,n)});i.on("click",function(){a.select("svg").append("g").classed("tree-brush",!0).call(l)});var o=a.append("button").text("Show Lengths").classed("btn btn-outline-secondary",!0);o.on("click",function(){a.select("svg").remove(),"Show Lengths"===o.text()?(H(t,e,n,a,!0),o.text("Hide Lengths")):(H(t,e,n,a,!1),o.text("Show Lengths"))})}function U(t,e){return t.filter(function(t){return t.map(function(t){return t.node}).map(function(t){return e.indexOf(t)>-1}).indexOf(!0)>-1})}function H(t,e,n,a,i){var l=10,o=90,s=50,c=20,u=400-c-o,d=700-l-s,f=r.x().size([d,u]);!function t(e,n){n.combEdge=n.edgeLength+e,n.children&&n.children.forEach(function(e){t(n.combEdge,e)})}(0,t);var p=r.k(t);p=f(p);var v=r.s().domain([0,1]).range([0,u]).clamp(!0),h=a.append("svg").attr("width",u+c+o).attr("height",d+l+s).append("g").attr("transform","translate("+c+","+l+")"),g=(h.selectAll(".link").data(p.descendants().slice(1)).join("path").attr("class","link").attr("d",function(t){return i?"M"+v(t.data.combEdge)+","+t.x+"C"+(v(t.data.combEdge)+v(t.parent.data.combEdge))/2+","+t.x+" "+(v(t.data.combEdge)+v(t.parent.data.combEdge))/2+","+t.parent.x+" "+v(t.parent.data.combEdge)+","+t.parent.x:"M"+t.y+","+t.x+"C"+(t.y+t.parent.y)/2+","+t.x+" "+(t.y+t.parent.y)/2+","+t.parent.x+" "+t.parent.y+","+t.parent.x}),h.selectAll(".node").data(p.descendants()).join("g").attr("class",function(t){return"node"+(t.children?" node--internal":" node--leaf")}).attr("transform",function(t){return i?"translate("+v(t.data.combEdge)+","+t.x+")":"translate("+t.y+","+t.x+")"}));return g.append("circle").attr("r",3),g.on("mouseover",function(t,e,n){var a=r.v("#main-path-view").selectAll(".paths");r.v("#main-summary-view").selectAll(".branch-points").filter(function(e){return e.node===t.data.node}).classed("selected",!0),a.filter(function(e){return e.map(function(t){return t.node}).indexOf(t.data.node)>-1}).classed("hover",!0).selectAll("g").filter(function(e){return e.node===t.data.node}).classed("selected",!0),r.v(n[e]).classed("selected-branch",!0)}).on("mouseout",function(t,e,n){r.w(".paths.hover").classed("hover",!1),r.w("g.selected").classed("selected",!1),r.v(n[e]).classed("selected-branch",!1)}),g}function X(t,e,n,r,a,i){var l=t.append("button").attr("id","view-toggle").attr("attr","button").attr("class","btn btn-outline-secondary");"paths"===i?l.text("View Summary"):"summary"===i?l.text("View Paths"):console.error("pathView parameter not found");var o=t.append("button").attr("id","view-filter");o.attr("class","btn btn-outline-secondary").text("Show Filters"),o.on("click",function(){return w(o,n,a,r)});var s=t.append("button").attr("id","scrunch");s.attr("class","btn btn-outline-secondary").text("Collapse Attributes"),s.attr("value",!1),s.on("click",function(){return function(t,e,n){var r=x();"Collapse Attributes"===t.text()?(t.text("Expand Attributes"),e.selectAll("*").remove(),t.attr("value",!0),C(r,e,n,"edgeLength")):(t.text("Collapse Attributes"),e.selectAll("*").remove(),t.attr("value",!1),C(r,e,n,"edgeLength"))}(s,n,r)}),l.on("click",function(){return function(t,e,n){"View Paths"===t.text()?t.text("View Summary"):t.text("View Paths");h(e,n)}(l,r,a)})}function Y(t,e,n,r,a,i,l){try{var o=t[i](l),s=o.value}catch(t){return void n(t)}o.done?e(s):Promise.resolve(s).then(r,a)}n.d(e,"dataMaster",function(){return z}),n.d(e,"savedSelected",function(){return q}),n.d(e,"collapsed",function(){return J});var z=[],q=[],J=!1,Q=r.v("#wrapper"),G=Q.select("#main"),K=(Q.select("#selected"),Q.select("#sidebar")),W=Q.select("#toolbar");i(r.m,"./public/data/anolis-edges.json","edge").then(function(){var t,e=(t=regeneratorRuntime.mark(function t(e){var n,a,l,d,p,h,g,m,b,y,w,A;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Array.prototype.unique=function(){return this.filter(function(t,e,n){return n.indexOf(t)===e})},t.next=3,i(r.m,"./public/data/anolis-edge-length.json","edge");case 3:return n=t.sent,a=e.rows.map(function(t){return t.V1}),l=e.rows.filter(function(t){return-1==a.indexOf(t.V2)}),t.next=8,i(r.m,"./public/data/anolisLeafChar.json","");case 8:return d=t.sent,t.next=11,i(r.m,"./public/data/anolis-labels.json","");case 11:return p=t.sent,t.next=14,i(r.m,"./public/data/anolis-awesomeness-res.json","continuous");case 14:return t.t0=t.sent,t.next=17,i(r.m,"./public/data/anolis-island-res.json","discrete");case 17:return t.t1=t.sent,t.next=20,i(r.m,"./public/data/anolis-svl-res.json","continuous");case 20:return t.t2=t.sent,t.next=23,i(r.m,"./public/data/anolis-ecomorph-res.json","discrete");case 23:t.t3=t.sent,h={awesomeness:t.t0,island:t.t1,SVL:t.t2,ecomorph:t.t3},g=o(h,[["#0dc1d1","#c8f7fd"],["#3AD701","#2a9b01"],["#fec303","#d3a001"],["#fe4ecb","#d30197"],["#f36b2c"],["#1abc9c"],["#493267"],["#a40b0b"],["#0095b6"]]),m=s(p,l,d,g),b=c(e,n,h,g),y=f(b,m,"V1","V2"),w=u(y,h,g),z.push(w),X(W,0,G,g,"edgeLength","paths"),Q.select("#filter-tab").classed("hidden",!0),B(A=R(y,e),w,g,K),H(A,0,0,K,!1),k=g,O="edgeLength",S=void 0,j=void 0,S=r.v("#main"),j=x(),S.selectAll("*").remove(),j.length>50?(v(j,S,k),r.v("#view-toggle").text("View Paths"),document.getElementById("scrunch").disabled=!0):(C(j,S,k,O),r.v("#view-toggle").text("View Summary"),document.getElementById("scrunch").disabled=!1);case 38:case"end":return t.stop()}var k,O,S,j},t)}),function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function l(t){Y(i,r,a,l,o,"next",t)}function o(t){Y(i,r,a,l,o,"throw",t)}l(void 0)})});return function(t){return e.apply(this,arguments)}}());Q.append("div").attr("id","tooltip").style("opacity",0)},21:function(t,e,n){}});
//# sourceMappingURL=app.450728e7.js.map